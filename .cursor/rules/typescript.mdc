---
description: TypeScript rules and patterns
globs: ["**/*.ts", "**/*.tsx"]
---

# TypeScript Guidelines

## File Naming Convention

**REQUIRED**: All TypeScript files MUST use kebab-case naming.

### Examples

```typescript
// ✅ CORRECT
user-service.ts
order-service.ts
auth-middleware.ts
error-handler.ts
request-validator.ts

// ❌ FORBIDDEN
userService.ts
orderService.ts
authMiddleware.ts
errorHandler.ts
requestValidator.ts
```

### Exceptions

- `index.ts` - Always use `index.ts` for barrel exports
- Test files - Use `*.test.ts` or `*.spec.ts` (kebab-case for the base name)
- Configuration files - Use kebab-case: `drizzle.config.ts`, `vitest.config.ts`

### Enforcement

When reviewing code:
- **Reject** any files using camelCase or PascalCase
- **Require** kebab-case for all new files
- **Refactor** existing files to kebab-case when encountered

## Strict Mode

This project uses strict TypeScript configuration:
- `strict: true`
- `noUncheckedIndexedAccess: true`
- `verbatimModuleSyntax: true`

## Import Patterns

```typescript
// Use import type for type-only imports
import type { Env } from "@repo/types";

// Regular imports for values
import { successResponse } from "@repo/utils";
```

## Cloudflare Workers Types

Workers use `@cloudflare/workers-types` for global types like:
- `Request`, `Response`
- `ExecutionContext`
- `Env` (custom bindings)

## Error Handling

```typescript
try {
  // operation
} catch (error) {
  return c.json(
    errorResponse(error instanceof Error ? error.message : "Unknown error"),
    500
  );
}
```

## Database Patterns

```typescript
import { createDb, users } from "@repo/db";
import { eq } from "drizzle-orm";

const db = createDb(env);
const result = await db.select().from(users).where(eq(users.id, id));
```

## Hono Patterns

```typescript
import { Hono } from "hono";
import type { Env } from "@repo/types";

type Context = {
  Bindings: Env;
};

const app = new Hono<Context>();

app.get("/", (c) => c.json({ message: "Hello" }));

export default {
  fetch: (request, env, ctx) => app.fetch(request, env, ctx),
};
```
